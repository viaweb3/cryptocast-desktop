# 开发指南

本文档旨在为参与 CryptoCast Desktop 项目的开发者提供指导，包括开发状态、后续计划和注意事项。

---

## 快速入门

关于项目的详细介绍、开发环境设置、开发命令和项目结构，请参考主文档：

➡️ **[README.md](./README.md)**

---

## 📍 当前开发状态

项目已完成核心框架的搭建和关键功能的实现，目前处于功能完善和体验优化阶段。

### 已实现的核心功能

-   **应用框架**: 基于 Electron + React + TypeScript 的现代化桌面应用框架。
-   **核心服务层**: 实现了包括活动、钱包、区块链、价格等在内的服务，为应用提供了完整的后端逻辑支撑。
-   **结构化日志**: 集成 Winston 日志系统，提供类型安全的结构化日志记录和调试能力。
-   **数据库**: 集成了 SQLite 数据库，并定义了核心业务（活动、接收人、交易等）的数据结构。
-   **IPC 通信**: 建立了连接渲染进程和主进程的安全 IPC 通道，API 接口定义清晰。
-   **多链支持**: 集成了 `ethers.js` 和 `@solana/web3.js`，具备了与 EVM 链和 Solana 交互的完整能力。
-   **UI 页面**: 创建了应用所需的主要页面（仪表盘、创建活动、设置等）和完整布局。
-   **测试框架**: 配置了 Jest 用于单元/集成测试。
-   **测试工具**: 提供空投地址生成脚本，方便开发和测试。

### 存在的技术债务

-   **代码结构**: `src/main/ipc/handlers.ts` 文件过长，未来应按功能域进行拆分。
-   **安全性**: 数据库中存储的私钥当前仅为 Base64 编码，需要实现基于用户密码的强加密存储。
-   **测试覆盖**: 虽然测试框架已搭建，但单元测试和集成测试的覆盖率仍需大幅提高。
-   **错误处理**: 需要建立更系统和统一的错误处理与重试机制。

---

## 🚀 后续开发计划

### 近期目标

1.  **性能与稳定性优化**:
    -   对大规模数据处理（如导入数万地址）进行性能分析和优化。
    -   完善所有业务流程中的错误处理和边界条件检查。
2.  **安全性增强**:
    -   实现对本地数据库中敏感数据（特别是私钥）的加密。
3.  **功能完善**:
    -   完善活动执行过程中的状态监控和实时反馈。
    -   优化链管理和钱包管理的用户体验。
4.  **文档与测试**:
    -   补充和完善现有文档。
    -   大幅提升单元测试和集成测试的覆盖率，确保应用质量。

### 远期目标

-   **打包与分发**:
    -   优化 `electron-builder` 配置（已支持 Windows 和 macOS 双平台）。
    -   为 macOS 和 Windows 应用实现代码签名和公证。
    -   集成 `electron-updater` 实现自动更新功能。
-   **扩展功能**:
    -   支持更多的区块链网络。
    -   探索插件化架构，允许社区扩展功能。
    -   增强日志分析和问题诊断工具。

---

## ⚠️ 注意事项

-   **私钥安全**: 开发过程中，切勿将任何私钥或敏感信息硬编码或提交到版本控制中。
-   **数据库**: 应用数据库文件存储在用户数据目录中。在开发过程中，对 `src/main/database/sqlite-schema.ts` 的修改可能会导致需要删除本地数据库文件 (`cryptocast.db`) 以重新生成。
-   **代码风格**: 项目配置了 Prettier 和 ESLint，请在提交代码前确保格式正确。

---

## 📚 相关文档

- **[架构设计](./ARCHITECTURE.md)**
- **[API 文档](./API_DOCS.md)**
- **[测试指南](./TESTING.md)**
- **[开发路线图](./ROADMAP.md)**
- **[UI 设计](./UI_DESIGN.md)**
