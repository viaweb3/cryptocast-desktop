# CryptoCast 需求规格文档

**产品名称**: CryptoCast - 专业级批量空投工具
**产品形态**: Electron 桌面应用
**版本**: v2.0
**更新时间**: 2024-12-XX
**文档状态**: 最终版

---

## 📋 项目概述

### 1.1 项目背景与目标

CryptoCast 是一个专业级的加密货币批量分发工具，旨在为营销活动、空投分发、社区奖励等场景提供安全、高效、易用的解决方案。随着加密货币市场的快速发展，项目方和社区管理者需要更专业的工具来处理大规模的代币分发需求。

#### 项目目标
- **安全性优先**: 确保私钥和资金安全
- **高效操作**: 支持大规模批量分发（500-5000+ 地址）
- **多链支持**: 覆盖主流区块链网络
- **用户体验**: 简单易用的桌面应用界面
- **成本控制**: 优化交易费用和操作成本

### 1.2 核心价值主张

#### 🔗 **多链支持**
- **EVM 链**: Ethereum, Polygon, BSC, Arbitrum, Optimism, Avalanche 等
- **Solana**: 主网和测试网支持
- **智能合约**: 预部署批量转账合约，优化 Gas 费用

#### 📦 **批量操作**
- **大规模处理**: 单次支持 500-5000+ 个地址
- **多文件格式**: 支持 CSV, Excel 文件导入地址列表
- **批量转账**: ERC-20, Solana Token 批量发送
- **实时进度**: 可视化进度条和状态监控

#### 🔒 **安全与隐私**
- **本地存储**: 所有数据和私钥本地加密存储
- **独立钱包**: 每个活动使用独立的资金钱包
- **无服务器**: 零服务器费用，完全离线可用
- **私钥保护**: AES 加密存储，内存自动清理

#### 💡 **用户体验**
- **跨平台**: Windows, macOS, Linux 原生应用
- **直观界面**: 现代化设计，操作简单易用
- **成本估算**: 实时 Gas 费用和成本计算
- **历史记录**: 完整的交易历史和报表导出

### 1.3 目标用户群体

#### 主要用户
1. **项目方团队**: DeFi 项目、GameFi 项目、NFT 项目
2. **社区管理者**: DAO 组织、加密社区
3. **营销团队**: 空投活动、奖励分发
4. **企业用户**: 员工薪酬、合作伙伴结算

#### 用户特征
- 具备基础的区块链知识
- 需要处理大量代币分发
- 重视安全性和可靠性
- 希望降低操作成本

### 1.4 产品形态选择

**选择 Electron 桌面应用的理由**:
- ✅ **用户友好**: 图形界面，零技术门槛
- ✅ **本地运行**: 无需云服务器，降低成本
- ✅ **数据隐私**: 私钥和数据本地存储
- ✅ **跨平台**: Windows、macOS、Linux 一套代码
- ✅ **离线能力**: 支持离线操作和签名

---

## 🎯 功能需求规格

### 2.1 核心功能模块

#### 2.1.1 活动管理 (Campaign Management)

**FR-001: 活动创建**
- **功能描述**: 用户可以创建新的批量分发活动
- **输入要求**:
  - 活动名称（必填，1-100字符）
  - 活动描述（选填，最大500字符）
  - 区块链网络（必选，下拉选择）
  - 代币合约地址（ERC-20/SPL Token）
  - 代币符号和小数位数
  - 预估总发放金额
- **业务规则**:
  - 活动名称不能重复
  - 代币地址必须通过格式验证
  - 支持保存为模板
  - 活动创建后为草稿状态
- **验收标准**:
  - 活动信息完整验证
  - 自动生成唯一活动ID
  - 支持活动信息编辑
  - 创建响应时间 < 2秒

**FR-002: 活动列表和筛选**
- **功能描述**: 提供活动管理界面，支持多维度查看和筛选
- **筛选条件**:
  - 活动状态（草稿/准备中/进行中/已完成/已取消）
  - 区块链网络
  - 创建时间范围
  - 活动名称关键词搜索
- **展示内容**:
  - 活动基本信息（名称、状态、网络、创建时间）
  - 进度统计（总收款人、成功、失败）
  - 资金使用情况
- **业务规则**:
  - 支持卡片和表格两种视图
  - 每页显示20条记录
  - 支持批量操作（删除、导出）
- **验收标准**:
  - 列表加载时间 < 2秒
  - 实时状态更新延迟 < 5秒
  - 搜索响应时间 < 1秒

**FR-003: 活动详情和监控**
- **功能描述**: 展示活动详细信息和实时执行状态
- **详情内容**:
  - 活动基本信息展示
  - 收款人列表和状态
  - 钱包余额信息
  - 交易历史记录
  - 成本统计信息
- **监控功能**:
  - 实时进度条（百分比+数量）
  - 成功/失败统计饼图
  - 交易速度图表
  - 错误日志查看
- **控制操作**:
  - 开始/暂停/继续执行
  - 重试失败交易
  - 导出报告
- **验收标准**:
  - 进度更新延迟 < 3秒
  - 支持暂停和恢复
  - 错误定位精确到具体交易

#### 2.1.2 钱包管理 (Wallet Management)

**FR-004: 活动钱包生成**
- **功能描述**: 为每个活动自动生成独立的资金钱包
- **技术要求**:
  - EVM钱包：基于BIP39的HD钱包
  - Solana钱包：使用ed25519密钥对
  - 私钥使用AES-256-GCM加密存储
  - 支持助记词备份恢复
- **安全要求**:
  - 私钥生成后立即加密
  - 内存中使用后立即清除
  - 支持导出加密备份文件
  - 文件权限设置为600
- **验收标准**:
  - 钱包生成成功率100%
  - 地址格式验证准确
  - 加密强度符合安全标准

**FR-005: 余额查询和管理**
- **功能描述**: 实时查询和管理钱包余额
- **查询功能**:
  - 原生代币余额（ETH/SOL等）
  - ERC-20/SPL Token余额
  - 余额历史记录图表
  - 汇率转换显示（USD/CNY）
- **通知机制**:
  - 余额变化实时提醒
  - 余额不足预警
  - 大额入账通知
- **业务规则**:
  - 余额查询缓存5秒
  - 支持30天历史记录
  - 汇率数据每小时更新
- **验收标准**:
  - 余额查询响应时间 < 3秒
  - 余额精度准确到最小单位
  - 支持手动刷新

**FR-006: 资金转账和充值**
- **功能描述**: 支持向活动钱包转入资金
- **功能特性**:
  - 生成收款二维码
  - 支持地址复制
  - 最小充值金额提醒
  - 充值到账监控
- **安全验证**:
  - 地址生成后二次确认
  - 支持地址格式验证
  - 充值交易验证
- **验收标准**:
  - 二维码清晰可识别
  - 地址复制准确无误
  - 到账提醒延迟 < 30秒

#### 2.1.3 收款人管理 (Recipient Management)

**FR-007: 收款人列表导入**
- **功能描述**: 支持多种格式的收款人数据导入
- **支持格式**:
  - CSV文件（支持自定义分隔符）
  - Excel文件（.xlsx, .xls）
  - JSON格式
  - 手动逐条添加
- **数据字段**:
  - 收款地址（必填）
  - 分发金额（必填）
  - 邮箱地址（选填）
  - 备注信息（选填）
- **验证规则**:
  - 地址格式验证
  - 金额格式验证
  - 重复地址检测
  - 数据完整性检查
- **验收标准**:
  - 支持5000+记录导入
  - 导入时间 < 30秒
  - 错误数据明确标记

**FR-008: 地址验证和清洗**
- **功能描述**: 验证收款人地址的有效性和格式
- **验证功能**:
  - EVM地址格式验证（42字符，0x开头）
  - Solana地址格式验证（44字符，base58编码）
  - 地址 checksum 验证
  - 重复地址检测和合并
- **清洗功能**:
  - 格式标准化
  - 空格和特殊字符清理
  - 无效地址标记
  - 修正建议提供
- **验收标准**:
  - 地址验证准确率100%
  - 支持10+主流地址格式
  - 重复检测效率高（万条<1秒）

**FR-009: 金额分配和调整**
- **功能描述**: 灵活的金额分配机制
- **分配模式**:
  - **固定金额**: 所有收款人相同金额
  - **按比例分配**: 基于权重分配
  - **随机金额**: 在指定范围内随机
  - **自定义导入**: 从文件导入具体金额
- **调整功能**:
  - 批量金额调整（比例调整）
  - 单个金额编辑
  - 总金额自动计算
  - 金额分布预览
- **业务规则**:
  - 金额精度根据代币小数位数
  - 支持撤销操作（最近10次）
  - 最低金额限制（防粉尘）
- **验收标准**:
  - 分配算法数学正确
  - 总金额计算准确
  - 支持分配规则保存

#### 2.1.4 批量发送执行 (Batch Execution)

**FR-010: 交易批次管理**
- **功能描述**: 将大规模发送分解为可管理的批次
- **批次策略**:
  - 智能批次大小（根据Gas费用）
  - 用户自定义批次大小
  - 基于金额的批次划分
  - 基于优先级的批次排序
- **执行控制**:
  - 批次暂停/恢复
  - 批次执行顺序调整
  - 并发批次数量控制
  - 失败批次重试
- **业务规则**:
  - 默认批次大小100笔
  - 最大并发批次5个
  - 批次间间隔可配置
- **验收标准**:
  - 批次划分合理高效
  - 支持动态调整策略
  - 批次状态实时跟踪

**FR-011: 智能合约批量发送**
- **功能描述**: 使用优化的智能合约进行批量发送
- **EVM批量合约**:
  - 支持ERC-20批量转账
  - 支持ETH批量转账
  - Gas费用优化（预估节省50%+）
  - 可配置批量大小（1-200）
- **Solana批量发送**:
  - 支持SPL Token批量转账
  - 支持SOL批量转账
  - 交易大小优化
  - 计算单元优化
- **错误处理**:
  - 单笔失败不影响其他交易
  - 自动重试机制（最多3次）
  - 失败原因分析
  - 手动重试选项
- **验收标准**:
  - Gas费用节省 > 50%
  - 批量成功率 > 99%
  - 失败自动恢复率 > 80%

**FR-012: 执行进度监控**
- **功能描述**: 实时监控批量发送执行进度
- **进度展示**:
  - 整体进度条（百分比）
  - 批次进度条
  - 实时统计数据
  - 速度指示器（交易/分钟）
- **状态跟踪**:
  - 交易队列状态
  - 成功/失败计数
  - 剩余时间预估
  - 错误分类统计
- **用户控制**:
  - 暂停/继续执行
  - 调整执行速度
  - 跳过失败交易
  - 紧急停止功能
- **验收标准**:
  - 进度更新延迟 < 3秒
  - 统计数据实时准确
  - 支持快速响应控制

#### 2.1.5 成本估算和管理 (Cost Management)

**FR-013: Gas费用估算**
- **功能描述**: 准确估算交易费用
- **估算功能**:
  - 实时Gas价格获取
  - 批量交易费用估算
  - 不同网络费用对比
  - 费用趋势预测
- **优化建议**:
  - 最佳发送时机推荐
  - Gas价格阈值提醒
  - 网络拥堵提示
  - 费用优化建议
- **业务规则**:
  - 估算误差范围 < 10%
  - 支持历史费用查询
  - 费用预算设置
- **验收标准**:
  - 估算准确率高
  - 支持多网络对比
  - 优化建议实用有效

**FR-014: 成本分析报告**
- **功能描述**: 提供详细的成本分析
- **报告内容**:
  - 总成本统计（按活动/批次）
  - 单笔交易成本分析
  - 成本趋势图表
  - 网络成本对比
  - 费用优化效果评估
- **导出功能**:
  - PDF格式报告
  - Excel详细数据
  - 图表图片导出
  - 自定义报告模板
- **验收标准**:
  - 成本计算准确无误
  - 支持多种图表展示
  - 报告格式专业美观

### 2.2 辅助功能模块

#### 2.2.1 交易历史和报告 (Transaction History & Reporting)

**FR-015: 交易记录管理**
- **功能描述**: 完整的交易历史记录管理
- **记录内容**:
  - 交易哈希和状态
  - 发送方和接收方地址
  - 交易金额和Gas费用
  - 区块确认信息
  - 交易时间戳
- **查询功能**:
  - 多维度搜索（地址、金额、时间、状态）
  - 高级筛选器
  - 排序和分页
  - 交易详情查看
- **外部链接**:
  - 区块链浏览器链接
  - 交易收据查看
  - 地址追踪
- **验收标准**:
  - 交易记录完整准确
  - 搜索响应时间 < 2秒
  - 区块链验证正确

**FR-016: 报告生成和导出**
- **功能描述**: 生成各类分析报告
- **报告类型**:
  - **活动总结报告**: 活动执行概览和统计
  - **交易明细报告**: 所有交易详细记录
  - **成本分析报告**: 费用使用和优化分析
  - **失败分析报告**: 失败原因和改进建议
  - **合规审计报告**: 符合监管要求的审计报告
- **导出格式**:
  - PDF（适合打印和分享）
  - Excel（适合数据分析）
  - CSV（适合数据导入）
  - JSON（适合API集成）
- **自定义选项**:
  - 报告模板选择
  - 数据字段自定义
  - 图表样式调整
  - 品牌标识添加
- **验收标准**:
  - 报告数据准确完整
  - 格式专业美观
  - 导出功能稳定可靠

#### 2.2.2 设置和配置 (Settings & Configuration)

**FR-017: 网络配置**
- **功能描述**: 灵活的区块链网络配置
- **预置网络**:
  - Ethereum Mainnet, Sepolia Testnet
  - Polygon Mainnet, Mumbai Testnet
  - BSC Mainnet, BSC Testnet
  - Arbitrum Mainnet, Goerli Testnet
  - Solana Mainnet, Devnet
- **自定义配置**:
  - 自定义RPC端点
  - 网络名称和链ID
  - 区块浏览器URL
  - 货币符号和小数位数
- **高级选项**:
  - 连接超时设置
  - 重试次数配置
  - 网络优先级排序
  - 负载均衡设置
- **网络监控**:
  - 连接状态实时显示
  - 网络延迟监测
  - RPC健康检查
  - 网络切换建议
- **验收标准**:
  - 支持10+主流网络
  - 网络切换响应快速
  - 连接状态准确显示

**FR-018: 安全设置**
- **功能描述**: 应用安全相关配置
- **身份认证**:
  - 应用密码设置
  - 自动锁定时间配置
  - 生物识别支持（指纹/面部）
  - 多因子认证选项
- **数据保护**:
  - 备份频率设置
  - 备份存储位置
  - 数据加密级别
  - 安全删除选项
- **审计功能**:
  - 操作日志记录
  - 异常行为检测
  - 安全事件通知
  - 会话管理
- **隐私控制**:
  - 数据收集偏好
  - 遥测数据开关
  - 错误报告设置
  - 匿名使用统计
- **验收标准**:
  - 安全设置全面有效
  - 密码强度验证严格
  - 备份机制可靠

#### 2.2.3 用户界面和体验 (UI/UX)

**FR-019: 响应式界面设计**
- **功能描述**: 适应不同屏幕尺寸和用户偏好的界面
- **布局适配**:
  - 最小窗口尺寸支持
  - 窗口大小记忆
  - 多显示器支持
  - 界面元素自适应
- **主题支持**:
  - 亮色/暗色主题
  - 高对比度模式
  - 自定义主题色彩
  - 系统主题跟随
- **个性化设置**:
  - 字体大小调整
  - 界面语言选择
  - 快捷键自定义
  - 工具栏配置
- **交互优化**:
  - 拖拽操作支持
  - 右键菜单
  - 键盘导航
  - 手势操作
- **验收标准**:
  - 界面美观专业
  - 响应速度快
  - 操作逻辑直观

**FR-020: 无障碍访问**
- **功能描述**: 支持无障碍访问，提高应用可用性
- **键盘导航**:
  - Tab键顺序合理
  - 快捷键完整覆盖
  - 焦点指示清晰
  - 键盘快捷键提示
- **屏幕阅读器**:
  - 语义化HTML结构
  - ARIA标签完整
  - 内容朗读正确
  - 状态变化通知
- **视觉辅助**:
  - 高对比度模式
  - 大字体模式
  - 色盲友好配色
  - 动画效果控制
- **认知辅助**:
  - 简化操作流程
  - 清晰的错误提示
  - 操作确认机制
  - 进度状态明确
- **验收标准**:
  - 符合WCAG 2.1 AA级别标准
  - 无障碍功能完整可用
  - 用户反馈积极

---

## 🔒 非功能需求

### 3.1 性能需求

#### 3.1.1 响应时间要求
- **界面响应**: 用户操作响应时间 < 200ms
- **数据加载**: 列表数据加载时间 < 2 秒
- **交易查询**: 余额查询响应时间 < 3 秒
- **批量发送**: 1000 笔交易执行时间 < 30 分钟
- **报告生成**: 复杂报告生成时间 < 10 秒

#### 3.1.2 并发处理能力
- **同时活动数**: 支持 10+ 活动同时管理
- **并发交易数**: 支持 100+ 交易并发处理
- **用户数**: 支持单用户多会话操作
- **数据处理**: 支持 10000+ 收款人数据处理

#### 3.1.3 资源使用限制
- **内存使用**: 正常运行内存使用 < 500MB
- **CPU 使用**: 空闲状态 CPU 使用 < 5%
- **磁盘空间**: 应用安装大小 < 200MB
- **网络带宽**: 正常使用带宽 < 1MB/s

### 3.2 安全需求

#### 3.2.1 数据安全
- **私钥加密**: 使用 AES-256-GCM 算法加密
- **传输安全**: 所有网络通信使用 HTTPS/TLS
- **存储安全**: 敏感数据本地加密存储
- **访问控制**: 基于角色的权限控制

#### 3.2.2 身份认证
- **本地认证**: 支持密码/指纹认证
- **会话管理**: 自动会话超时和锁定
- **多重验证**: 支持关键操作二次确认
- **审计日志**: 完整的操作审计记录

#### 3.2.3 风险控制
- **风险检测**: 异常操作行为检测
- **限额控制**: 单笔/单日操作限额
- **备份恢复**: 数据备份和恢复机制
- **应急响应**: 安全事件应急处理流程

### 3.3 可靠性需求

#### 3.3.1 系统稳定性
- **运行时间**: 7x24 小时稳定运行
- **崩溃率**: 应用崩溃率 < 0.1%
- **数据一致性**: 数据一致性保证 99.99%
- **故障恢复**: 故障自动恢复能力

#### 3.3.2 数据完整性
- **事务完整性**: 交易数据完整性保证
- **备份完整性**: 备份数据完整性验证
- **同步一致性**: 多链数据同步一致性
- **版本控制**: 数据版本控制和回滚

#### 3.3.3 容错能力
- **网络异常**: 网络中断自动重连
- **服务异常**: 服务降级和熔断机制
- **数据异常**: 数据异常自动修复
- **操作异常**: 操作异常回滚机制

### 3.4 可用性需求

#### 3.4.1 易用性
- **学习成本**: 新用户上手时间 < 30 分钟
- **操作效率**: 熟练用户操作时间 < 5 分钟
- **错误率**: 用户操作错误率 < 5%
- **满意度**: 用户满意度 > 90%

#### 3.4.2 可维护性
- **代码质量**: 代码覆盖率 > 80%
- **文档完整性**: 技术文档完整性 > 95%
- **故障诊断**: 故障定位时间 < 1 小时
- **版本发布**: 版本发布周期 < 2 周

#### 3.4.3 可扩展性
- **功能扩展**: 支持 10+ 新功能扩展
- **平台扩展**: 支持 3+ 操作系统平台
- **链扩展**: 支持 20+ 区块链网络
- **用户扩展**: 支持 1000+ 用户并发

---

## 🌐 技术约束

### 4.1 技术栈要求

#### 4.1.1 开发技术
- **前端**: React 19+、TypeScript 5.7+、TailwindCSS
- **后端**: Node.js 24+、Electron 39+
- **数据库**: SQLite 5+、better-sqlite3 5+
- **区块链**: ethers.js 6+、@solana/web3.js 1.9+

#### 4.1.2 构建工具
- **构建**: Vite 7+、electron-builder 26+
- **测试**: Jest 29+、Playwright 1.5+
- **代码质量**: ESLint、Prettier、TypeScript
- **CI/CD**: GitHub Actions

#### 4.1.3 第三方依赖
- **UI 组件**: DaisyUI 5.5+、@headlessui/react
- **图表库**: Chart.js、Recharts
- **文件处理**: csv-parse、jspdf
- **加密**: 内置 crypto 模块

### 4.2 平台兼容性

#### 4.2.1 操作系统支持
- **Windows**: Windows 10+ (x64)
- **macOS**: macOS 10.15+ (Intel + Apple Silicon)
- **Linux**: Ubuntu 20.04+ (x64)

#### 4.2.2 硬件要求
- **CPU**: 双核 2.0GHz+
- **内存**: 4GB RAM (推荐 8GB)
- **存储**: 500MB 可用空间
- **网络**: 稳定的互联网连接

### 4.3 合规要求

#### 4.3.1 法律合规
- **数据保护**: 符合 GDPR 数据保护要求
- **隐私政策**: 完整的隐私政策声明
- **用户协议**: 清晰的用户服务协议
- **开源许可**: MIT 开源许可证合规

#### 4.3.2 行业标准
- **安全标准**: OWASP 安全标准
- **代码质量**: 业界最佳实践
- **文档标准**: 技术文档标准化
- **测试标准**: 软件测试标准

---

## 📊 数据需求

### 5.1 数据模型

#### 5.1.1 核心实体
- **活动 (Campaign)**: 批量分发活动信息
- **钱包 (Wallet)**: 活动相关钱包信息
- **收款人 (Recipient)**: 收款地址和金额信息
- **交易 (Transaction)**: 区块链交易记录
- **批次 (Batch)**: 批量发送批次信息

#### 5.1.2 数据关系
- 活动 1:N 钱包
- 活动 1:N 收款人
- 活动 1:N 交易
- 活动 1:N 批次
- 批次 1:N 交易

#### 5.1.3 数据完整性
- 主键约束：所有表必须有主键
- 外键约束：关联数据完整性
- 唯一约束：地址、交易哈希唯一性
- 检查约束：金额、状态值域检查

### 5.2 数据存储

#### 5.2.1 本地存储
- **SQLite 数据库**: 结构化数据存储
- **文件系统**: 配置文件、日志文件
- **加密存储**: 私钥、敏感数据
- **缓存存储**: 临时数据、性能优化

#### 5.2.2 数据备份
- **自动备份**: 定期数据自动备份
- **手动备份**: 用户手动触发备份
- **云端备份**: 可选云端备份功能
- **备份验证**: 备份数据完整性验证

### 5.3 数据迁移

#### 5.3.1 版本升级
- **数据库迁移**: 自动数据库结构升级
- **数据迁移**: 版本间数据迁移
- **配置迁移**: 用户配置迁移
- **向后兼容**: 保持向后兼容性

#### 5.3.2 数据导入导出
- **CSV 导入**: 收款人列表导入
- **Excel 导入**: 复杂数据导入
- **报告导出**: 多格式报告导出
- **数据验证**: 导入数据验证

---

## 🧪 测试需求

### 6.1 测试类型

#### 6.1.1 功能测试
- **单元测试**: 核心功能模块测试
- **集成测试**: 模块间集成测试
- **端到端测试**: 完整业务流程测试
- **用户验收测试**: 用户场景测试

#### 6.1.2 非功能测试
- **性能测试**: 负载、压力测试
- **安全测试**: 安全漏洞扫描
- **兼容性测试**: 平台兼容性测试
- **可用性测试**: 用户体验测试

### 6.2 测试覆盖率

#### 6.2.1 代码覆盖率
- **语句覆盖率**: > 80%
- **分支覆盖率**: > 70%
- **函数覆盖率**: > 85%
- **行覆盖率**: > 80%

#### 6.2.2 功能覆盖率
- **核心功能**: 100%
- **辅助功能**: > 90%
- **异常处理**: > 80%
- **边界条件**: > 70%

### 6.3 测试环境

#### 6.3.1 测试网络
- **测试链**: Sepolia、Goerli、Mumbai
- **主网**: 分阶段主网测试
- **本地测试**: 本地区块链测试
- **模拟环境**: Mock 环境测试

#### 6.3.2 测试数据
- **正常数据**: 标准业务数据
- **边界数据**: 极值数据测试
- **异常数据**: 错误数据处理
- **性能数据**: 大数据量测试

---

## 📈 性能指标

### 7.1 关键性能指标 (KPI)

#### 7.1.1 功能性指标
- **批量处理能力**: 5000+ 地址/次
- **交易成功率**: > 99%
- **处理速度**: 100 交易/分钟
- **准确率**: 数据准确率 100%

#### 7.1.2 技术性指标
- **响应时间**: 界面响应 < 200ms
- **可用性**: 99.9% 系统可用性
- **并发数**: 支持 100 并发交易
- **资源使用**: 内存 < 500MB

#### 7.1.3 用户体验指标
- **学习成本**: 30 分钟上手
- **操作效率**: 5 分钟完成活动
- **错误率**: < 5% 操作错误
- **满意度**: > 90% 用户满意度

### 7.2 监控指标

#### 7.2.1 系统监控
- **CPU 使用率**: 实时 CPU 监控
- **内存使用率**: 内存使用监控
- **磁盘 I/O**: 磁盘性能监控
- **网络状态**: 网络连接监控

#### 7.2.2 业务监控
- **活动统计**: 活动创建和完成统计
- **交易统计**: 交易成功率和速度
- **用户行为**: 用户操作行为分析
- **错误统计**: 错误类型和频率

### 7.3 报告要求

#### 7.3.1 定期报告
- **日报**: 每日运营数据报告
- **周报**: 每周功能使用报告
- **月报**: 每月性能指标报告
- **季报**: 季度发展报告

#### 7.3.2 实时报告
- **实时监控**: 系统实时状态
- **异常报告**: 异常事件报告
- **性能报告**: 性能指标报告
- **用户报告**: 用户反馈报告

---

## 🚀 发布计划

### 8.1 版本规划

#### 8.1.1 MVP 版本 (v1.0)
- **核心功能**: 基础批量发送功能
- **支持链**: Ethereum、Polygon、BSC
- **平台**: Windows、macOS
- **发布时间**: 2024年Q1

#### 8.1.2 增强版本 (v1.5)
- **新功能**: Solana 支持、高级报告
- **平台**: Linux 支持
- **性能**: 性能优化、稳定性提升
- **发布时间**: 2024年Q2

#### 8.1.3 专业版本 (v2.0)
- **企业功能**: 多用户、权限管理
- **高级功能**: API 接口、插件系统
- **生态**: 第三方集成、社区功能
- **发布时间**: 2024年Q3

### 8.2 发布流程

#### 8.2.1 开发阶段
- **需求分析**: 详细需求分析和评审
- **设计阶段**: 技术设计和架构评审
- **开发阶段**: 功能开发和代码评审
- **测试阶段**: 全面测试和质量保证

#### 8.2.2 发布阶段
- **预发布**: 内部测试和 bug 修复
- **Beta 发布**: 有限用户测试
- **正式发布**: 公开发布和推广
- **维护阶段**: 问题修复和功能更新

### 8.3 质量保证

#### 8.3.1 代码质量
- **代码规范**: 统一代码规范和格式
- **代码评审**: 强制代码评审流程
- **自动化测试**: 完整的自动化测试
- **静态分析**: 代码静态分析工具

#### 8.3.2 发布质量
- **功能测试**: 完整功能测试验证
- **性能测试**: 性能指标验证
- **安全测试**: 安全漏洞扫描
- **用户测试**: 真实用户场景测试

---

## 📝 验收标准

### 9.1 功能验收

#### 9.1.1 核心功能验收
- ✅ 活动创建和管理功能完整
- ✅ 批量发送功能稳定可靠
- ✅ 多链支持功能正常
- ✅ 钱包管理功能安全
- ✅ 数据导入导出功能完善

#### 9.1.2 性能验收
- ✅ 响应时间符合要求
- ✅ 并发处理能力达标
- ✅ 资源使用在合理范围
- ✅ 批量处理速度满足需求
- ✅ 系统稳定性达到标准

#### 9.1.3 安全验收
- ✅ 私钥安全存储和传输
- ✅ 用户权限控制完善
- ✅ 数据加密和解密正确
- ✅ 安全漏洞扫描通过
- ✅ 渗透测试通过

### 9.2 用户验收

#### 9.2.1 易用性验收
- ✅ 用户界面美观友好
- ✅ 操作流程简单清晰
- ✅ 学习成本合理
- ✅ 帮助文档完整
- ✅ 用户反馈积极

#### 9.2.2 兼容性验收
- ✅ 多平台兼容性良好
- ✅ 不同屏幕适配正常
- ✅ 系统兼容性测试通过
- ✅ 第三方软件兼容性
- ✅ 向后兼容性保证

### 9.3 文档验收

#### 9.3.1 技术文档
- ✅ 架构设计文档完整
- ✅ API 文档详细准确
- ✅ 数据库设计文档
- ✅ 部署和运维文档
- ✅ 故障排除指南

#### 9.3.2 用户文档
- ✅ 用户使用手册详细
- ✅ 快速入门指南清晰
- ✅ 常见问题解答完整
- ✅ 视频教程制作
- ✅ 在线帮助系统

---

## 🔄 需求变更管理

### 10.1 变更流程

#### 10.1.1 变更申请
- **变更描述**: 详细的变更需求和原因
- **影响分析**: 对系统的影响分析
- **优先级评估**: 变更优先级评估
- **资源评估**: 所需资源和时间评估

#### 10.1.2 变更评审
- **技术评审**: 技术可行性评审
- **业务评审**: 业务价值评审
- **风险评审**: 实施风险评估
- **决策**: 变更是否批准

#### 10.1.3 变更实施
- **计划制定**: 详细实施计划
- **开发实施**: 按计划开发实施
- **测试验证**: 全面测试验证
- **发布部署**: 生产环境部署

### 10.2 版本控制

#### 10.2.1 需求版本
- **需求基线**: 稳定的需求版本
- **需求追踪**: 需求变更追踪
- **需求关联**: 与设计和实现关联
- **需求验证**: 需求实现验证

#### 10.2.2 配置管理
- **代码版本**: 代码版本控制
- **文档版本**: 文档版本管理
- **构建版本**: 构建版本标识
- **发布版本**: 发布版本管理

### 10.3 沟通机制

#### 10.3.1 内部沟通
- **团队会议**: 定期团队同步会议
- **进度报告**: 每周进度报告
- **问题讨论**: 技术问题讨论机制
- **知识分享**: 技术知识分享

#### 10.3.2 外部沟通
- **用户反馈**: 用户反馈收集机制
- **社区交流**: 开发者社区交流
- **合作伙伴**: 合作伙伴沟通协调
- **发布公告**: 重要变更发布公告

---

## 📋 附录

### A. 术语表

- **EVM**: Ethereum Virtual Machine，以太坊虚拟机
- **ERC-20**: Ethereum Request for Comments 20，代币标准
- **SPL Token**: Solana Program Library Token，Solana 代币标准
- **Gas Fee**: 区块链网络交易费用
- **RPC**: Remote Procedure Call，远程过程调用
- **DApp**: Decentralized Application，去中心化应用
- **HD Wallet**: Hierarchical Deterministic Wallet，分层确定性钱包
- **IPC**: Inter-Process Communication，进程间通信
- **AES**: Advanced Encryption Standard，高级加密标准
- **WCAG**: Web Content Accessibility Guidelines，Web内容无障碍指南

### B. 参考文档

- [Ethereum 开发文档](https://ethereum.org/developers/)
- [Solana 开发文档](https://docs.solana.com/)
- [Electron 开发文档](https://www.electronjs.org/docs)
- [React 开发文档](https://react.dev/)
- [TypeScript 文档](https://www.typescriptlang.org/)

### C. 业务数据参考

| 发放频率 | 每天或实时 | 高频发放场景 |
| 完成时间 | 30分钟-1小时 | 常规速度,平衡成本 |
| Gas费承担 | 100%平台承担 | 用户零成本领取 |
| 单次地址数 | 500-5,000 | 根据活动规模浮动 |

### D. 联系信息

- **项目负责人**: [姓名] - [邮箱]
- **技术负责人**: [姓名] - [邮箱]
- **产品负责人**: [姓名] - [邮箱]
- **质量负责人**: [姓名] - [邮箱]

---

**文档状态**: 最终版 ✅
**最后审核**: [日期] - [审核人]
**下次更新**: [日期] - [更新人]

### 3. 支持的区块链

#### 3.1 EVM链(主要)
- **要求**: 支持所有EVM兼容链
- **重点链**:
  - Ethereum主网
  - L2网络(Arbitrum, Optimism, Base等)
  - 侧链(BSC, Polygon等)
- **实现方式**: BatchAirdrop 通用合约

#### 3.2 Solana(辅助)
- **代币标准**: SPL Token
- **使用比例**: <20%活动
- **实现方式**: 直接 SPL Token 转账，**无需智能合约** ⭐

### 4. 隐私保护需求

#### 4.1 核心隐私要求
- ✅ **隐藏发送方身份**: 每次活动使用全新独立钱包
- ✅ **防止关联分析**: 不同活动间无法通过链上数据关联
- ⚠️ **接收方列表**: 链上公开(批量发送必然暴露)
- ⚠️ **发放金额**: 链上公开(交易透明性要求)

#### 4.2 实现策略
1. **独立钱包**: 每次活动创建新的部署账户
2. **独立合约**: 每次EVM活动部署新的Airdrop合约实例
3. **资金隔离**: 活动间资金流转无关联
4. **记录保留**: 本地数据库保存所有信息供审计

---

## 🔧 功能需求

### F1. 钱包管理

#### F1.1 自动生成独立钱包
- **触发时机**: 每次新活动创建时
- **生成方式**: 系统自动生成HD钱包
- **存储方式**: AES-256-GCM加密存储私钥到本地
- **使用范围**: 单次活动独占,不跨活动复用

#### F1.2 私钥管理
- **加密算法**: AES-256-GCM
- **主密钥**: 存储在 `~/.config/batch-airdrop/.masterkey`，权限600
- **访问控制**: 仅主进程可解密
- **导出功能**: 支持导出活动钱包私钥（加密或明文）⭐
- **生命周期**: 活动结束后可选销毁(保留地址记录)

#### F1.3 资金管理（外部操作）⭐
- **显示地址**: 创建活动后立即显示钱包地址
- **充值提示**: 显示需要转入的代币和Gas费数量
- **余额监控**: 实时查询链上余额，检测是否充足
- **外部充值**: 运营人员使用外部钱包（MetaMask等）手动转账
- **余额检查**: 发送前确认余额充足，不足则禁用发送按钮

#### F1.4 私钥导出 ⭐
- **导出时机**: 活动创建后、活动详情页
- **导出格式**:
  - 明文私钥（复制到剪贴板）
  - 二维码（手机钱包扫描）
  - Keystore文件（加密JSON）
- **安全警告**: 导出前显示安全提示
- **用途**:
  - 导入到MetaMask等钱包进行转账
  - 备份私钥
  - 活动结束后手动回收剩余资金

---

### F2. 合约管理(EVM链)

#### F2.1 合约自动部署
- **部署时机**: 每次EVM活动独立部署新合约
- **合约类型**: BatchAirdrop批量发送合约
- **部署账户**: 使用活动独立钱包部署
- **构造参数**: 代币地址

#### F2.2 合约功能要求
```solidity
核心功能:
- batchTransfer(address[] recipients, uint256[] amounts)
- emergencyPause() // 紧急暂停
- withdrawRemaining() // 提取剩余代币
- destruct() // 可选:自毁合约
```

#### F2.3 合约生命周期管理
- ✅ **保留记录**: 保存合约地址、部署时间、交易哈希
- ✅ **资金回收**: 发送完成后回收剩余代币
- ⚠️ **自动销毁**: 可选功能,增加隐私但失去审计能力
- ✅ **紧急暂停**: 异常情况下可暂停合约

---

### F3. Solana 发送（无合约） ⭐ 新

#### F3.1 实现方式
- **直接转账**: 使用 SPL Token 的 `transfer` 指令
- **无需合约**: 不需要部署任何程序
- **并发发送**: 利用 Solana 高 TPS 并发处理

#### F3.2 流程对比

| 步骤 | EVM链 | Solana |
|------|-------|--------|
| 1 | 创建钱包 | 创建钱包 |
| 2 | 充值代币+Gas | 充值SPL代币+SOL |
| 3 | 部署合约 | ❌ 跳过 |
| 4 | 转代币到合约 | ❌ 跳过 |
| 5 | 调用batchTransfer | 直接transfer |
| 6 | 回收剩余代币 | 回收剩余代币 |

#### F3.3 费用对比
- **EVM**: 部署合约 ~$50 + 批量发送 ~$200 (Polygon)
- **Solana**: 无部署成本 + 转账 ~$5 (5000地址)

---

### F4. 批量发送功能

#### F4.1 EVM链批量发送
- **实现方式**: 智能合约批量transfer
- **分批策略**:
  - 单批上限: 100-200地址(根据gas limit)
  - 自动分批: 5000地址自动分25批发送
- **Gas优化**:
  - 使用EIP-1559动态Gas价格
  - 批次大小动态调整

#### F4.2 Solana批量发送
- **实现方式**: 构建多个Transfer指令
- **并发控制**: 控制并发数（推荐50）
- **失败重试**: 单笔失败不影响其他

#### F4.3 地址列表管理
- **输入方式**:
  - ✅ CSV文件上传（拖拽）
  - ✅ API接口传入（可扩展）
- **数据验证**:
  - 地址格式校验
  - 重复地址检测(后端)
  - 金额合法性检查

---

### F5. Gas 自动获取和预估 ⭐ 新

#### F5.1 实时Gas价格获取
- **数据源**: 直接从链上获取 `provider.getFeeData()`
- **备用源**: Etherscan Gas Tracker API
- **缓存策略**: 本地缓存10秒，后台自动更新
- **发送前**: 强制刷新获取最新价格

#### F5.2 智能预估逻辑
```typescript
预估Gas = 合约部署 + 代币转账 + (批量发送 × 批次数) + 20%缓冲
```

- **精确计算**: 使用 `estimateGas` 模拟真实交易
- **动态调整**: 根据实际批次大小调整
- **USD换算**: 实时获取 ETH/USD 价格

#### F5.3 Gas策略选择
- **经济模式**: 低Gas价格，等待时间较长
- **标准模式**: 平衡价格和速度（默认）
- **快速模式**: 高Gas价格，优先确认
- **自定义**: 用户手动设置Gas上限

#### F5.4 UI展示
- 创建活动时显示预估费用
- 实时Gas价格监控（仪表盘顶部）
- 颜色预警：绿色正常/黄色偏高/红色过高

---

### F6. 交易前预览和确认 ⭐ 新

#### F6.1 两阶段确认

**第一阶段：创建活动**
- 填写基本信息
- 上传地址列表
- 显示初步预估
- 保存为"待发送"状态

**第二阶段：执行前确认**
- 显示详细预览信息
- 实时刷新Gas价格
- 余额充足性检查
- 用户明确点击"确认发送"

#### F6.2 预览信息清单
必须展示的信息：
1. **活动信息**: 名称、链、代币、合约地址
2. **接收者**: 总数、总金额、地址列表预览
3. **费用**: 当前Gas价格、预估消耗、USD成本
4. **钱包余额**: 主钱包余额、所需金额、是否充足
5. **风险提示**: 交易不可撤销、核对地址

#### F6.3 特殊处理

**高价值警告**（触发条件）:
- 总金额 > $10,000
- Gas费用 > $500
- 地址数 > 3,000

**余额不足提示**:
- 明确显示缺少的金额
- 禁用"确认发送"按钮
- 提供"去充值"引导

#### F6.4 确认流程
```
创建活动 → 保存(CREATED)
    ↓
点击"开始发送"
    ↓
弹出预览对话框
    ↓
展示详细信息 + 实时Gas
    ↓
勾选"我已确认"
    ↓
点击"确认并开始发送"
    ↓
真正执行交易
```

---

### F7. 监控与告警

#### F7.1 交易状态监控
- **实时追踪**: 每笔交易的pending/confirmed/failed状态
- **可视化**: Dashboard展示发送进度
- **数据存储**: 所有交易记录入本地数据库

#### F7.2 Gas费用监控
- **实时计算**: 累计已消耗gas费
- **预算预警**: 超过预设阈值时告警
- **链对比**: 不同链的费用对比分析

#### F7.3 失败重试机制
- **自动重试**:
  - Gas不足: 自动提高gas price重试
  - Nonce错误: 自动修正
  - 网络超时: 指数退避重试
- **最大重试**: 3次后标记为失败需人工介入
- **智能判断**: 区分可重试错误和永久性错误

#### F7.4 桌面通知
- **完成通知**: 活动发送完成时弹出桌面通知
- **错误通知**: 发生严重错误时提醒
- **可配置**: 用户可在设置中开关通知

---

### F8. 审计和记录导出 ⭐ 新

#### F8.1 支持的导出格式

**1. CSV格式** - 用于Excel分析
```csv
活动ID,活动名称,区块链,代币,接收地址,金额,状态,交易哈希,Gas消耗,时间
a1b2c3,2025-01营销,Polygon,USDC,0x123...,100,成功,0xabc...,0.004,2025-11-19 14:30
```

**2. PDF报告** - 正式审计文档
- 封面：活动信息、Logo
- 概要：统计数据、成功率、Gas消耗
- 详细列表：所有交易记录
- 图表：Gas趋势、成功率分布

**3. JSON格式** - 程序化处理
```json
{
  "campaign": {...},
  "summary": {...},
  "transactions": [...]
}
```

#### F8.2 导出场景

| 场景 | 导出内容 | 格式 | 触发位置 |
|------|---------|------|---------|
| 单个活动报告 | 该活动所有记录 | CSV/PDF/JSON | 活动详情页 |
| 批量活动报告 | 多个活动汇总 | CSV/PDF | 历史页面 |
| 自定义范围 | 时间范围筛选 | CSV | 历史页面 |
| 仅失败记录 | 失败交易列表 | CSV | 活动详情页 |

#### F8.3 导出内容

**基础字段**（必含）:
- 活动ID、名称、链、代币
- 接收地址、金额、状态
- 交易哈希、Gas消耗
- 时间戳

**扩展字段**（PDF报告）:
- 创建者、钱包地址、合约地址
- Gas价格、确认时间
- 批次信息、重试次数
- 错误信息

#### F8.4 UI交互
- 活动详情页："📥 导出报告"按钮
- 选择格式对话框
- 自动打开文件所在文件夹
- 成功提示

#### F8.5 审计追溯
- 所有操作不可篡改（SQLite数据库）
- 删除活动前强制导出报告
- 支持按时间范围查询历史

---

### F9. 链和RPC管理 ⭐ 新

#### F9.1 EVM链管理

**内置链预设**:
- Ethereum Mainnet
- Polygon
- Arbitrum One
- Optimism
- Base
- BSC (Binance Smart Chain)
- Avalanche C-Chain

**添加自定义EVM链**:
- **必填字段**:
  - 链名称 (例如: "zkSync Era")
  - Chain ID (例如: 324)
  - RPC URL (例如: "https://mainnet.era.zksync.io")
  - 区块浏览器 URL (例如: "https://explorer.zksync.io")
  - 原生代币符号 (例如: "ETH")
  - 原生代币精度 (默认: 18)
- **可选字段**:
  - 备用RPC URL (故障切换)
  - 网络图标 URL
- **验证逻辑**:
  - 自动检测Chain ID是否匹配
  - RPC连通性测试
  - 获取最新区块验证
- **管理操作**:
  - 编辑链配置
  - 删除自定义链(内置链不可删除)
  - 启用/禁用链(隐藏不常用的链)

#### F9.2 Solana网络管理

**网络类型**:
- Mainnet-beta (生产环境)
- Devnet (开发测试)
- Testnet (测试网络)
- 自定义网络

**RPC节点管理**:
- **添加RPC节点**:
  - 节点名称 (例如: "Quicknode 主节点")
  - RPC URL (例如: "https://api.mainnet-beta.solana.com")
  - WebSocket URL (可选)
  - 优先级 (1-10,数字越小优先级越高)
- **RPC健康检查**:
  - 延迟测试 (ping时间)
  - 可用性检测 (getHealth)
  - TPS速率测试
  - 自动标记不可用节点
- **自动切换机制**:
  - 主节点失败自动切换到备用节点
  - 按优先级顺序尝试
  - 实时显示当前使用的RPC
- **性能监控**:
  - 显示每个节点的延迟
  - 成功率统计
  - 最近24小时可用性

#### F9.3 RPC配置持久化

- **存储位置**: 本地SQLite数据库 `chains` 表
- **字段设计**:
```sql
CREATE TABLE chains (
  id INTEGER PRIMARY KEY,
  type TEXT, -- 'evm' or 'solana'
  chain_id INTEGER, -- EVM only
  name TEXT NOT NULL,
  rpc_url TEXT NOT NULL,
  rpc_backup TEXT, -- 备用RPC
  explorer_url TEXT,
  symbol TEXT, -- 原生代币
  decimals INTEGER,
  enabled BOOLEAN DEFAULT 1,
  is_custom BOOLEAN DEFAULT 0,
  created_at TEXT
);

CREATE TABLE solana_rpcs (
  id INTEGER PRIMARY KEY,
  network TEXT, -- 'mainnet-beta', 'devnet', 'testnet'
  name TEXT NOT NULL,
  rpc_url TEXT NOT NULL,
  ws_url TEXT,
  priority INTEGER DEFAULT 5,
  latency INTEGER, -- ms
  uptime_24h REAL, -- 可用性百分比
  enabled BOOLEAN DEFAULT 1,
  last_checked TEXT
);
```

#### F9.4 UI交互

**EVM链管理页面**:
- 内置链列表(可启用/禁用)
- "➕ 添加自定义链"按钮
- 编辑/删除操作
- RPC测试按钮(显示延迟和状态)

**Solana RPC管理页面**:
- 按网络分组显示(Mainnet/Devnet/Testnet)
- 实时延迟和可用性指示器
- 拖拽调整优先级
- "🔄 测试所有节点"按钮

**创建活动时的链选择**:
- 仅显示已启用的链
- 显示RPC状态图标(🟢正常/🟡慢/🔴离线)
- 不可用链显示"配置RPC"提示

---

### F10. 安全功能

#### F10.1 防重复发放(后端校验)
- **实现层**: 应用层（数据库唯一约束）
- **校验逻辑**: 检查地址是否已在本活动中发放
- **响应**: 重复地址跳过并记录

#### F10.2 数据安全

**存储策略**:
- **私钥加密**: AES-256-GCM加密存储
- **主密钥保护**: 文件权限600，仅所有者可读写
- **默认位置**: 系统用户目录（升级安装不会丢失）
  - Windows: `%APPDATA%\batch-airdrop\`
  - macOS: `~/Library/Application Support/batch-airdrop/`
  - Linux: `~/.config/batch-airdrop/`

**自定义数据目录** ⭐ 新:
- **设置入口**: 设置页面 → 数据管理 → "更改数据目录"
- **选择方式**: 系统文件选择器选择目录
- **迁移功能**:
  - 自动复制现有数据到新位置
  - 验证数据完整性
  - 迁移成功后删除旧数据(可选)
  - 迁移失败自动回滚
- **限制条件**:
  - 必须有写权限
  - 不能选择系统保护目录
  - 推荐至少1GB可用空间
- **重启生效**: 更改后需重启应用
- **恢复默认**: 支持一键恢复到系统默认位置

**数据备份**:
- **手动备份**: 一键备份到指定位置
- **自动备份**: 可选每日/每周自动备份
- **备份内容**:
  - 数据库文件 (airdrop.db)
  - 加密主密钥 (.masterkey)
  - 配置文件
- **恢复功能**: 从备份文件恢复数据

#### F10.3 审计日志
- **记录内容**:
  - 谁在何时创建了活动
  - 活动配置参数
  - 所有交易记录
  - 异常和错误日志
- **保留**: 永久保存在本地数据库

---

## 📊 非功能性需求

### 性能要求

| 指标 | 目标值 |
|------|--------|
| 应用启动时间 | <5秒 |
| 5000地址发送完成 | 30-60分钟 |
| UI响应时间 | <200ms |
| 数据库查询 | <100ms |

### 可靠性
- **数据一致性**: 确保每个地址恰好收到一次(或明确失败)
- **幂等性**: 操作支持幂等,避免重复
- **容错**: 单个交易失败不影响整体流程
- **本地备份**: 支持数据库备份和恢复

### 可维护性
- **日志规范**: 结构化日志，按级别记录
- **错误追踪**: 清晰的错误提示和堆栈
- **文档**: 完整的用户手册和开发文档

### 兼容性
- **平台**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **最小窗口**: 1000×700
- **推荐窗口**: 1200×800

---

## 🎯 成功指标

### 业务指标
- 活动创建到发送完成平均时长 <2小时
- 发送成功率 >99%
- 运营人员培训时间 <30分钟

### 技术指标
- 应用崩溃率 <0.1%
- 交易重试成功率 >95%
- 用户满意度 >4.5/5

---

## 🚧 技术风险与挑战

详见 [CHALLENGES.md](./CHALLENGES.md)

关键挑战：
1. **Gas成本控制** - L2优先策略
2. **隐私保护** - 独立钱包+合约
3. **高频性能** - Nonce管理、并发控制
4. **RPC稳定性** - 多提供者池化
5. **私钥安全** - AES加密+主密钥保护
6. **Solana并发** - 批量指令优化

---

## 📈 实施优先级

### P0 - MVP核心（必须）
- [x] 需求分析完成
- [ ] Electron框架搭建
- [ ] 钱包管理（加密存储 + 私钥导出）⭐
- [ ] 基础链管理（内置EVM链 + Solana）
- [ ] Gas自动获取和预估 ⭐
- [ ] 交易前预览确认 ⭐
- [ ] EVM链发送（带合约）
- [ ] 基础进度监控

### P1 - 生产就绪（重要）
- [ ] 记录导出（CSV/PDF/JSON）⭐
- [ ] Solana发送（无合约）⭐
- [ ] 链和RPC管理（自定义EVM链 + Solana RPC切换）⭐
- [ ] 失败重试机制
- [ ] 桌面通知
- [ ] 余额监控和外部充值流程 ⭐

### P2 - 功能增强（可选）
- [ ] 自定义数据目录 ⭐
- [ ] 数据自动备份/恢复
- [ ] RPC健康检查和自动切换
- [ ] 管理后台UI优化
- [ ] 高级统计Dashboard
- [ ] 自动更新功能

---

## 🗺️ 实施路线

详见 [ROADMAP_ELECTRON.md](./ROADMAP_ELECTRON.md)

**总周期**: 6周到生产可用版本

- Week 1: 项目搭建 + 基础框架
- Week 2: 核心功能（钱包+活动）
- Week 3: 发送逻辑 + 合约集成
- Week 4: UI完善 + 监控
- Week 5: 多链支持 + Solana
- Week 6: 打包测试 + 优化

---

## 📎 附录

### A1. 关键技术决策记录

| 决策点 | 选择 | 理由 |
|--------|------|------|
| 产品形态 | Electron桌面应用 | 运营人员友好、本地运行、零服务器成本 |
| 隐私方案 | 独立钱包+独立合约 | 平衡隐私和实现复杂度 |
| Solana实现 | 直接转账，无合约 | 简化流程，降低成本 |
| Gas获取 | 实时获取，不写死 | 适应价格波动 |
| 确认流程 | 两阶段确认 | 防止误操作，提高安全性 |
| 私钥管理 | AES加密本地存储 | 适配桌面应用场景 |
| 导出格式 | CSV/PDF/JSON | 满足不同审计需求 |

### A2. 术语表

- **EVM**: Ethereum Virtual Machine，以太坊虚拟机
- **SPL**: Solana Program Library，Solana程序库
- **Gas**: 以太坊网络上的交易费用单位
- **Gwei**: Gas价格单位，1 Gwei = 10^-9 ETH
- **Airdrop**: 空投，批量发送代币
- **HD Wallet**: 分层确定性钱包
- **IPC**: Inter-Process Communication，进程间通信

---

**文档版本**: v1.1
**最后更新**: 2025-11-19
**变更记录**:
- v1.0: 初始版本（云端Web服务）
- v1.1: 改为Electron桌面应用，新增4个需求（导出、Solana无合约、Gas自动获取、交易前确认）
